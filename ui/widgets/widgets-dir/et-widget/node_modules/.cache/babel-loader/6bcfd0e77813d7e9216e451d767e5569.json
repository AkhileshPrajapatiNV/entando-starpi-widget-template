{"ast":null,"code":"var _jsxFileName = \"/home/akhilesh/Entando/strapi/sachin/entando-starpi-widget-template/ui/widgets/widgets-dir/et-widget/src/custom-element/stapi-entando-app.js\";\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport App from '../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst getKeycloakInstance = () => window && window.entando && window.entando.keycloak && { ...window.entando.keycloak,\n  initialized: true\n} || {\n  initialized: false\n};\n\nexport const subscribeToWidgetEvent = (eventType, eventHandler) => {\n  window.addEventListener(eventType, eventHandler);\n  return () => {\n    window.removeEventListener(eventType, eventHandler);\n  };\n};\nexport const KEYCLOAK_EVENT_TYPE = 'keycloak';\n\nclass StapiEntandoApp extends HTMLElement {\n  connectedCallback() {\n    this.mountPoint = document.createElement('span');\n    this.keycloak = { ...getKeycloakInstance(),\n      initialized: true\n    };\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, e => {\n      if (e.detail.eventType === \"onReady\") {\n        this.keycloak = { ...getKeycloakInstance(),\n          initialized: true\n        };\n        this.render();\n      }\n    });\n  }\n\n  render() {\n    ReactDOM.render( /*#__PURE__*/_jsxDEV(React.StrictMode, {\n      children: /*#__PURE__*/_jsxDEV(App, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 25\n    }, this), this.appendChild(this.mountPoint));\n  }\n\n}\n\ncustomElements.get('stapi-entando-app') || customElements.define(\"stapi-entando-app\", StapiEntandoApp);","map":{"version":3,"sources":["/home/akhilesh/Entando/strapi/sachin/entando-starpi-widget-template/ui/widgets/widgets-dir/et-widget/src/custom-element/stapi-entando-app.js"],"names":["ReactDOM","React","App","getKeycloakInstance","window","entando","keycloak","initialized","subscribeToWidgetEvent","eventType","eventHandler","addEventListener","removeEventListener","KEYCLOAK_EVENT_TYPE","StapiEntandoApp","HTMLElement","connectedCallback","mountPoint","document","createElement","unsubscribeFromKeycloakEvent","e","detail","render","appendChild","customElements","get","define"],"mappings":";AAAA,OAAOA,QAAP,MAAqB,WAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,QAAhB;;;AAEA,MAAMC,mBAAmB,GAAG,MACvBC,MAAM,IAAIA,MAAM,CAACC,OAAjB,IAA4BD,MAAM,CAACC,OAAP,CAAeC,QAA3C,IAAuD,EAAE,GAAGF,MAAM,CAACC,OAAP,CAAeC,QAApB;AAA8BC,EAAAA,WAAW,EAAE;AAA3C,CAAxD,IAA8G;AAC1GA,EAAAA,WAAW,EAAE;AAD6F,CADlH;;AAKA,OAAO,MAAMC,sBAAsB,GAAG,CAACC,SAAD,EAAYC,YAAZ,KAA6B;AAC/DN,EAAAA,MAAM,CAACO,gBAAP,CAAwBF,SAAxB,EAAmCC,YAAnC;AAEA,SAAO,MAAM;AACTN,IAAAA,MAAM,CAACQ,mBAAP,CAA2BH,SAA3B,EAAsCC,YAAtC;AACH,GAFD;AAGH,CANM;AAOP,OAAO,MAAMG,mBAAmB,GAAG,UAA5B;;AAEP,MAAMC,eAAN,SAA8BC,WAA9B,CAA0C;AACtCC,EAAAA,iBAAiB,GAAG;AAChB,SAAKC,UAAL,GAAkBC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAlB;AACA,SAAKb,QAAL,GAAgB,EAAE,GAAGH,mBAAmB,EAAxB;AAA4BI,MAAAA,WAAW,EAAE;AAAzC,KAAhB;AACA,SAAKa,4BAAL,GAAoCZ,sBAAsB,CAACK,mBAAD,EAAuBQ,CAAD,IAAO;AACnF,UAAIA,CAAC,CAACC,MAAF,CAASb,SAAT,KAAuB,SAA3B,EAAsC;AAClC,aAAKH,QAAL,GAAgB,EAAE,GAAGH,mBAAmB,EAAxB;AAA4BI,UAAAA,WAAW,EAAE;AAAzC,SAAhB;AACA,aAAKgB,MAAL;AACH;AACJ,KALyD,CAA1D;AAMH;;AAGDA,EAAAA,MAAM,GAAG;AACLvB,IAAAA,QAAQ,CAACuB,MAAT,eAAgB,QAAC,KAAD,CAAO,UAAP;AAAA,6BACZ,QAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AADY;AAAA;AAAA;AAAA;AAAA,YAAhB,EAGI,KAAKC,WAAL,CAAiB,KAAKP,UAAtB,CAHJ;AAIH;;AAlBqC;;AAqB1CQ,cAAc,CAACC,GAAf,CAAmB,mBAAnB,KAA2CD,cAAc,CAACE,MAAf,CAAsB,mBAAtB,EAA2Cb,eAA3C,CAA3C","sourcesContent":["import ReactDOM from \"react-dom\"\nimport React from \"react\"\nimport App from '../App'\n\nconst getKeycloakInstance = () =>\n    (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\n        initialized: false,\n    }\n\nexport const subscribeToWidgetEvent = (eventType, eventHandler) => {\n    window.addEventListener(eventType, eventHandler)\n\n    return () => {\n        window.removeEventListener(eventType, eventHandler)\n    }\n}\nexport const KEYCLOAK_EVENT_TYPE = 'keycloak';\n\nclass StapiEntandoApp extends HTMLElement {\n    connectedCallback() {\n        this.mountPoint = document.createElement('span')\n        this.keycloak = { ...getKeycloakInstance(), initialized: true }\n        this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, (e) => {\n            if (e.detail.eventType === \"onReady\") {\n                this.keycloak = { ...getKeycloakInstance(), initialized: true }\n                this.render()\n            }\n        })\n    }\n\n\n    render() {\n        ReactDOM.render(<React.StrictMode>\n            <App />\n        </React.StrictMode>,\n            this.appendChild(this.mountPoint))\n    }\n}\n\ncustomElements.get('stapi-entando-app') || customElements.define(\"stapi-entando-app\", StapiEntandoApp)\n"]},"metadata":{},"sourceType":"module"}